<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Team Stat Predictor</title>
<style>
body { font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding:20px; }
#result { margin-top: 20px; }
</style>
</head>
<body>
<h1>Team Stat Predictor</h1>
<p>Enter a football team's name to see predicted stats for their next game.</p>
<input type="text" id="teamInput" placeholder="Enter team name" />
<button id="predictBtn">Predict</button>
<div id="result"></div>
<script>
// note: you need to provide your own API key for the sports data provider
const API_KEY = 'YOUR_API_KEY_HERE';

async function fetchTeamStats(teamName) {
  const response = await fetch(`https://api.football-data.org/v4/teams?name=${encodeURIComponent(teamName)}`, {
    headers: { 'X-Auth-Token': API_KEY }
  });
  return await response.json();
}

async function fetchTeamMatches(teamId) {
  const today = new Date();
  const pastDate = new Date();
  pastDate.setDate(today.getDate() - 30);
  const from = pastDate.toISOString().split('T')[0];
  const to = today.toISOString().split('T')[0];
  const response = await fetch(`https://api.football-data.org/v4/teams/${teamId}/matches?dateFrom=${from}&dateTo=${to}`, {
    headers: { 'X-Auth-Token': API_KEY }
  });
  return await response.json();
}

function predictStats(matches, teamId) {
  if (!matches || matches.length === 0) {
    return null;
  }
  let totalGoalsFor = 0;
  let totalGoalsAgainst = 0;
  let wins = 0;
  let draws = 0;
  let losses = 0;
  const lastResults = [];
  matches.forEach(match => {
    const homeId = match.homeTeam.id;
    const awayId = match.awayTeam.id;
    const score = match.score.fullTime;
    const goalsFor = homeId === teamId ? (score.home ?? 0) : (score.away ?? 0);
    const goalsAgainst = homeId === teamId ? (score.away ?? 0) : (score.home ?? 0);
    totalGoalsFor += goalsFor;
    totalGoalsAgainst += goalsAgainst;
    if (goalsFor > goalsAgainst) {
      wins++;
      lastResults.push('W');
    } else if (goalsFor < goalsAgainst) {
      losses++;
      lastResults.push('L');
    } else {
      draws++;
      lastResults.push('D');
    }
  });
  const avgGoalsFor = (totalGoalsFor / matches.length).toFixed(2);
  const avgGoalsAgainst = (totalGoalsAgainst / matches.length).toFixed(2);
  return { avgGoalsFor, avgGoalsAgainst, wins, losses, draws, lastResults };
}

document.getElementById('predictBtn').addEventListener('click', async () => {
  const teamName = document.getElementById('teamInput').value.trim();
  const resultDiv = document.getElementById('result');
  if (!teamName) {
    resultDiv.textContent = 'Please enter a team name.';
    return;
  }
  resultDiv.textContent = 'Loading...';
  try {
    const teamData = await fetchTeamStats(teamName);
    if (!teamData.teams || teamData.teams.length === 0) {
      resultDiv.textContent = 'Team not found.';
      return;
    }
    const team = teamData.teams[0];
    const teamId = team.id;
    const matchesData = await fetchTeamMatches(teamId);
    const prediction = predictStats(matchesData.matches, teamId);
    const injuryNote = 'Injury information is not available from this API.';
    if (prediction) {
      resultDiv.innerHTML = `
        <h2>${team.name}</h2>
        <p><strong>Average goals scored per game:</strong> ${prediction.avgGoalsFor}</p>
        <p><strong>Average goals conceded per game:</strong> ${prediction.avgGoalsAgainst}</p>
        <p><strong>Record (last ${matchesData.matches.length} matches):</strong> ${prediction.wins}W-${prediction.draws}D-${prediction.losses}L</p>
        <p><strong>Last results:</strong> ${prediction.lastResults.join(' ')}</p>
        <p><strong>Injuries:</strong> ${injuryNote}</p>
        <p><em>Note: Stats are based on the last 30 days of games.</em></p>
      `;
    } else {
      resultDiv.textContent = 'Not enough data to make a prediction.';
    }
  } catch (error) {
    console.error(error);
    resultDiv.textContent = 'Error fetching data.';
  }
});
</script>
</body>
</html>
